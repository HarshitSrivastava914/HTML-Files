<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script
      type="text/javascript"
      src="https://checkout.razorpay.com/v1/razorpay.js"
    ></script>
  </head>
  <body>
    <button id="btn">Pay</button>
    <script>
      var razorpay = new Razorpay({
        key: "rzp_live_jF0ae6CGrfeKlP",
        image: "https://i.imgur.com/n5tjHFD.jpg",
      });

      razorpay.once("ready", function (response) {
        console.log(response.methods);
      });

      var btn = document.querySelector("#btn");
      btn.addEventListener("click", function () {
        const vpa = "harshitsrivastava25012002@oksbi"; // VPA for validation

        // Verify the VPA before proceeding with payment
        razorpay
          .verifyVpa(vpa)
          .then(() => {
            alert("VPA is valid. Proceeding with payment...");
            razorpay.createPayment({
              amount: 500,
              currency: "INR",
              email: "gaurav.kumar@example.com",
              contact: "8299846359",
              method: "upi",
              upi: {
                vpa: vpa,
                flow: "collect",
              },
            });

            razorpay.on("payment.success", function (resp) {
              alert("Payment Success!");
              alert("Payment ID: " + resp.razorpay_payment_id);
              alert("Order ID: " + resp.razorpay_order_id);
              alert("Signature: " + resp.razorpay_signature);
            });

            razorpay.on("payment.error", function (resp) {
              alert("Payment Failed: " + resp.error.description);
            });
          })
          .catch(() => {
            alert("Invalid VPA. Please check and try again.");
          });
      });
    </script>
  </body>
</html>
